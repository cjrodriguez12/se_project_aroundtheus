!function(){"use strict";class e{constructor(e,t,s){let{name:o,link:r}=e;this._name=o,this._link=r,this._cardSelector=t,this._handleCardClick=s}_setEventListeners(){this._cardElement.querySelector(".gallery__card-button").addEventListener("click",(()=>{this._handleLike()})),this._cardElement.querySelector(".gallery__card-delete").addEventListener("click",(()=>{this._handleDelete()})),this._cardElement.querySelector(".gallery__card-image").addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}_handleLike(){this._cardElement.querySelector(".gallery__card-button").classList.toggle("gallery__card-button_active")}_handleDelete(){this._cardElement.remove(),this._cardElement=null}getTemplate(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".gallery__card").cloneNode(!0),this._cardElement}getView(){return this._card=this.getTemplate(),this._card.querySelector(".gallery__card-image").src=this._link,this._card.querySelector(".gallery__card-title").textContent=this._name,this._card.querySelector(".gallery__card-image").alt=`Photo of ${this._name}`,this._setEventListeners(),this._card}}class t{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent=" ",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputELs.every((e=>e.validity.valid))}toggleButtonState(){this._hasInvalidInput(this._inputELs)?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputELs=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this.toggleButtonState(),this._inputELs.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e){this._popUpElement=document.querySelector(e)}openModal(){this._popUpElement.classList.add("modal_opened"),document.addEventListener("keydown",this._closeModalByEscape)}closeModal(){this._popUpElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._closeModalByEscape)}_closeModalByEscape=e=>{"Escape"===e.key&&this.closeModal()};_closeModalOnRemoteClick=e=>{(e.currentTarget===e.target||e.target.classList.contains("modal__container")||e.target.classList.contains("modal__container-close"))&&this.closeModal()};setEventListeners(){this._popUpElement.addEventListener("click",this._closeModalOnRemoteClick)}}class o extends s{constructor(e,t){super(e),this._popUpForm=this._popUpElement.querySelector(".modal__form"),this._handleModalSubmit=t}closeModal(){this._popUpForm.reset(),super.closeModal()}setEventListeners(){super.setEventListeners(),this._popUpForm.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleModalSubmit(t)}))}_getInputValues(){const e={};return this._popUpForm.querySelectorAll(".modal__form-input").forEach((t=>{e[t.name]=t.value})),e}}const r=[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg "}],n=document.querySelector("#profile-edit-modal"),a=document.querySelector("#add-modal").querySelector("#add-modal-form"),i=n.querySelector(".modal__form"),l=(document.querySelector(".profile__name"),document.querySelector(".profile__description"),document.querySelector("#profile-title-input")),c=document.querySelector("#profile-description-input"),d=document.querySelector(".profile__edit"),_=document.querySelector(".profile__add-button"),u={inputSelector:".modal__form-input",submitButtonSelector:".modal__form-button",inactiveButtonClass:"modal__form-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},m={cardSection:".gallery__cards",cardTemplate:"#card-template",popUpSelector:".modal",profileSelector:"#profile-edit-modal",addSelector:"#add-modal",imageSelector:".gallery__card-image",nameSelector:".profile__name",jobSelector:".profile__description",avatarSelector:".profile__avatar"},p=t=>new e(t,m.cardTemplate,E).getView(),h=new class extends s{constructor(e){super(e)}openModal(e,t){this.popUpImage=this._popUpElement.querySelector(".modal__image"),this.popUpTitle=this._popUpElement.querySelector(".modal__box-image-title"),this.popUpImage.src=t,this.popUpImage.alt=e,this.popUpTitle.textContent=e,super.openModal()}}("#image-modal");function E(e,t){h.openModal(e,t)}h.setEventListeners(),new t(u,i).enableValidation();const S=new t(u,a);S.enableValidation();const g=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s)}getUserInfo(){const e={};return e.name=this._nameElement.textContent,e.description=this._jobElement.textContent,e}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}}(m);d.addEventListener("click",(()=>{var e;return e=g.getUserInfo(),l.value=e.name,c.value=e.description,y.openModal()}));const y=new o(m.profileSelector,(function(e){g.setUserInfo(e.title,e.description),y.closeModal()}));y.setEventListeners();const v=new o(m.addSelector,(function(e){const t=e.place,s=e.Url,o=p({name:t,link:s});f.addItems(o),v.closeModal()}));v.setEventListeners(),_.addEventListener("click",(()=>(S.toggleButtonState(),v.openModal())));const f=new class{constructor(e,t){let{renderer:s,items:o}=e;this._renderer=s,this._items=o,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this.addItems(this._renderer(e))}))}addItems(e){this._container.prepend(e)}}({items:r,renderer:p},m.cardSection);f.renderItems(r)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUEwQ1MsRUFBYUMsWUFRaERFLEVBQWFwRCxXQUFXLElBRWpDLE1BQU1vRCxFQUFlLElBQUl6QyxFQUN2QjZCLEVBQUFBLGlCQXdCRixTQUFpQ3ZCLEdBQy9CNEIsRUFBWU0sWUFBWWxDLEVBQVlvQyxNQUFPcEMsRUFBWWlDLGFBQ3ZERSxFQUFhbEQsWUFDZixJQXhCQWtELEVBQWExQyxvQkFDYixNQUFNNEMsRUFBWSxJQUFJM0MsRUFDcEI2QixFQUFBQSxhQXVCRixTQUE4QnZCLEdBQzVCLE1BQU1oRixFQUFPZ0YsRUFBWXNDLE1BQ25CckgsRUFBTytFLEVBQVl1QyxJQUVuQkMsRUFBVW5CLEVBQVcsQ0FBRXJHLE9BQU1DLFNBQ25DNEYsRUFBWTRCLFNBQVNELEdBRXJCSCxFQUFVcEQsWUFDWixJQTVCQW9ELEVBQVU1QyxvQkFDVjhCLEVBQUFBLGlCQUFxQyxTQUFTLEtBQzVDSSxFQUFpQnZELG9CQUNWaUUsRUFBVXRELGVBR25CLE1BQU04QixFQUFjLElHaEVMLE1BQ2JqRyxZQUFXQyxFQUFzQjZILEdBQVUsSUFBL0IsU0FBRUMsRUFBUSxNQUFFQyxHQUFPL0gsRUFDN0JLLEtBQUsySCxVQUFZRixFQUNqQnpILEtBQUs0SCxPQUFTRixFQUNkMUgsS0FBSzZILFdBQWE5RyxTQUFTUixjQUFjaUgsRUFDM0MsQ0FDQU0sY0FFRTlILEtBQUs0SCxPQUFPdEUsU0FBU3lFLElBQ25CL0gsS0FBS3VILFNBQVN2SCxLQUFLMkgsVUFBVUksR0FBTSxHQUV2QyxDQUNBUixTQUFTUyxHQUNQaEksS0FBSzZILFdBQVdJLFFBQVFELEVBQzFCLEdIbURBLENBQ0VOLE1BQU9yQixFQUNQb0IsU0FBVXRCLEdBRVpFLEVBQUFBLGFBRUZWLEVBQVltQyxZQUFZekIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL2NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvZm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rIH0sIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gIH1cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvL2xpa2UgYnRuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jYXJkLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgLy9kZWxldGUgYnRuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jYXJkLWRlbGV0ZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jYXJkLWltYWdlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipFdmVudCBIYW5kbGVycyAqL1xyXG4gIF9oYW5kbGVMaWtlKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fY2FyZC1idXR0b25cIilcclxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJnYWxsZXJ5X19jYXJkLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG4gIF9oYW5kbGVEZWxldGUoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdldFRlbXBsYXRlKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxuICBnZXRWaWV3KCkge1xyXG4gICAgLy8gZ2V0IGNhcmQgdmlld1xyXG4gICAgdGhpcy5fY2FyZCA9IHRoaXMuZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jYXJkLWltYWdlXCIpLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fY2FyZC10aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fY2FyZC1pbWFnZVwiKS5hbHQgPVxyXG4gICAgICBcIlBob3RvIG9mIFwiICsgYCR7dGhpcy5fbmFtZX1gO1xyXG4gICAgLy8gc2V0IGxpc3RlbmVyc1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIC8vIHJldHVybiBjYXJkXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gIH1cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFTCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RUwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVMLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFTC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVMKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFTC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RUwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIiBcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFTCkge1xyXG4gICAgaWYgKCFpbnB1dEVMLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RUwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFTCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RUxzLmV2ZXJ5KFxyXG4gICAgICAoX2lucHV0U2VsZWN0b3IpID0+IF9pbnB1dFNlbGVjdG9yLnZhbGlkaXR5LnZhbGlkXHJcbiAgICApO1xyXG4gIH1cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRFTHMpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVMcyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0RUxzLmZvckVhY2goKGlucHV0RUwpID0+IHtcclxuICAgICAgaW5wdXRFTC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFTCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3BVcFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3BVcEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcFVwU2VsZWN0b3IpO1xyXG4gIH1cclxuICBvcGVuTW9kYWwoKSB7XHJcbiAgICB0aGlzLl9wb3BVcEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlTW9kYWxCeUVzY2FwZSk7XHJcbiAgfVxyXG4gIGNsb3NlTW9kYWwoKSB7XHJcbiAgICB0aGlzLl9wb3BVcEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlTW9kYWxCeUVzY2FwZSk7XHJcbiAgfVxyXG4gIF9jbG9zZU1vZGFsQnlFc2NhcGUgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VNb2RhbCgpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgX2Nsb3NlTW9kYWxPblJlbW90ZUNsaWNrID0gKGV2dCkgPT4ge1xyXG4gICAgLy9cIi5cIiBpc24ndCByZXF1aXJlZCBmb3IgY2xhc3NsaXN0XHJcbiAgICBpZiAoXHJcbiAgICAgIGV2dC5jdXJyZW50VGFyZ2V0ID09PSBldnQudGFyZ2V0IHx8XHJcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2NvbnRhaW5lclwiKSB8fCBcclxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY29udGFpbmVyLWNsb3NlXCIpIFxyXG4gICAgICBcclxuICAgICkge1xyXG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKTtcclxuICAgIH1cclxuICB9O1xyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wVXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9jbG9zZU1vZGFsT25SZW1vdGVDbGljayk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wVXBTZWxlY3RvciwgaGFuZGxlTW9kYWxTdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcFVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wVXBGb3JtID0gdGhpcy5fcG9wVXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVNb2RhbFN1Ym1pdCA9IGhhbmRsZU1vZGFsU3VibWl0O1xyXG4gIH1cclxuICBjbG9zZU1vZGFsKCkge1xyXG4gICAgdGhpcy5fcG9wVXBGb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZU1vZGFsKCk7XHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcFVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3QgbW9kYWxJbnB1dHMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVNb2RhbFN1Ym1pdChtb2RhbElucHV0cyk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgbW9kYWxJbnB1dHMgPSB7fTtcclxuICAgIGNvbnN0IG1vZGFsSW5wdXRzTGlzdCA9XHJcbiAgICAgIHRoaXMuX3BvcFVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19mb3JtLWlucHV0XCIpO1xyXG4gICAgbW9kYWxJbnB1dHNMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIG1vZGFsSW5wdXRzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBtb2RhbElucHV0cztcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgICB9LFxyXG4gIFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGcgXCIsXHJcbiAgICB9LFxyXG5dO1xyXG4gLyoqZWxlbWVudHMgKi9cclxuXHJcbiBleHBvcnQgY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xyXG4gZXhwb3J0IGNvbnN0IGFkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtbW9kYWxcIik7XHJcbiBleHBvcnQgY29uc3QgYWRkTW9kYWxGb3JtID0gYWRkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNhZGQtbW9kYWwtZm9ybVwiKTtcclxuIGV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiBleHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbiBleHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuIGV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcclxuIGV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxyXG4gKTtcclxuIGV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdFwiKTtcclxuIGV4cG9ydCBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbiBleHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybS1pbnB1dFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWJ1dHRvblwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fZm9ybS1idXR0b25fZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG4gIH07XHJcbiAgZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcclxuICBjYXJkU2VjdGlvbjogXCIuZ2FsbGVyeV9fY2FyZHNcIixcclxuICBjYXJkVGVtcGxhdGU6IFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICBwb3BVcFNlbGVjdG9yOiBcIi5tb2RhbFwiLFxyXG4gIHByb2ZpbGVTZWxlY3RvcjogXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXHJcbiAgYWRkU2VsZWN0b3I6IFwiI2FkZC1tb2RhbFwiLFxyXG4gIGltYWdlU2VsZWN0b3I6IFwiLmdhbGxlcnlfX2NhcmQtaW1hZ2VcIixcclxuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxuICBhdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9fYXZhdGFyXCIsXHJcbn07IiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvY2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9mb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgKiBhcyBjb25zdGFudHMgZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuLyogKiBmdW5jdGlvbnMgICAgKi9cclxuY29uc3QgcmVuZGVyQ2FyZCA9IChjYXJkRGF0YSkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIGNhcmREYXRhLFxyXG4gICAgY29uc3RhbnRzLnNlbGVjdG9ycy5jYXJkVGVtcGxhdGUsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2tcclxuICApO1xyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufTtcclxuY29uc3QgcG9wVXBJbWFnZU1vZGFsID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlLW1vZGFsXCIpO1xyXG5wb3BVcEltYWdlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKG5hbWUsIGxpbmspIHtcclxuICBwb3BVcEltYWdlTW9kYWwub3Blbk1vZGFsKG5hbWUsIGxpbmspO1xyXG59XHJcblxyXG4vL0Zvcm1WYWxpZGF0aW9uXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgY29uc3RhbnRzLnNldHRpbmdzLFxyXG4gIGNvbnN0YW50cy5wcm9maWxlRWRpdEZvcm1cclxuKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgY29uc3RhbnRzLnNldHRpbmdzLFxyXG4gIGNvbnN0YW50cy5hZGRNb2RhbEZvcm1cclxuKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyBjYWxsIHF1ZXJ5c2VsZWN0b3Igb24gaW5wdXQgaW5zaWRlIGZvcm0gL3NldCB2YWx1ZXNcclxuZnVuY3Rpb24gaGFuZGxlRm9ybUZpbGwodXNlckluZm9MaXN0KSB7XHJcbiAgY29uc3RhbnRzLnByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gdXNlckluZm9MaXN0Lm5hbWU7XHJcbiAgY29uc3RhbnRzLnByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gdXNlckluZm9MaXN0LmRlc2NyaXB0aW9uO1xyXG59XHJcbi8vQnV0dG9ucyB0aGF0IE9wZW4gUG9wdXAgd2l0aCBmb3Jtc1xyXG5jb25zdCBuZXdVc2VySW5mbyA9IG5ldyBVc2VySW5mbyhjb25zdGFudHMuc2VsZWN0b3JzKTtcclxuY29uc3RhbnRzLnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgLy8gZ3JhYiBmcm9tIHVzZXJpbmZvIG5hbWUgKyBkZXNjcmlwdGlvbnNcclxuICBoYW5kbGVGb3JtRmlsbChuZXdVc2VySW5mby5nZXRVc2VySW5mbygpKTtcclxuXHJcbiAgcmV0dXJuIHByb2ZpbGVQb3B1cC5vcGVuTW9kYWwoKTtcclxufSk7XHJcbmNvbnN0IHByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIGNvbnN0YW50cy5zZWxlY3RvcnMucHJvZmlsZVNlbGVjdG9yLFxyXG4gIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0XHJcbik7XHJcbnByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdCBjYXJkUG9wVXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBjb25zdGFudHMuc2VsZWN0b3JzLmFkZFNlbGVjdG9yLFxyXG4gIGhhbmRsZUFkZE1vZGFsU3VibWl0XHJcbik7XHJcbmNhcmRQb3BVcC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdGFudHMuYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIHJldHVybiBjYXJkUG9wVXAub3Blbk1vZGFsKCk7XHJcbn0pO1xyXG4vL2luaXRpYWxpemVzIG5ldyBzZWN0aW9uIHJlbmRlcnMgaW5pdHRpYWwgY2FyZHMgYW5kIG5ldyBvbmVzXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGNvbnN0YW50cy5pbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICB9LFxyXG4gIGNvbnN0YW50cy5zZWxlY3RvcnMuY2FyZFNlY3Rpb25cclxuKTtcclxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoY29uc3RhbnRzLmluaXRpYWxDYXJkcyk7XHJcbi8vU3VibWl0IEJ1dHRvbiBoYW5kbGVyXHJcbi8qKkV2ZW50IEhhbmRsZXJzKi9cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQobW9kYWxJbnB1dHMpIHtcclxuICBuZXdVc2VySW5mby5zZXRVc2VySW5mbyhtb2RhbElucHV0cy50aXRsZSwgbW9kYWxJbnB1dHMuZGVzY3JpcHRpb24pO1xyXG4gIHByb2ZpbGVQb3B1cC5jbG9zZU1vZGFsKCk7XHJcbn1cclxuZnVuY3Rpb24gaGFuZGxlQWRkTW9kYWxTdWJtaXQobW9kYWxJbnB1dHMpIHtcclxuICBjb25zdCBuYW1lID0gbW9kYWxJbnB1dHMucGxhY2U7XHJcbiAgY29uc3QgbGluayA9IG1vZGFsSW5wdXRzLlVybDtcclxuICAvL2NvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7IG5hbWUsIGxpbmsgfSwgXCIjY2FyZC10ZW1wbGF0ZVwiKTtcclxuICBjb25zdCBuZXdDYXJkID0gcmVuZGVyQ2FyZCh7IG5hbWUsIGxpbmsgfSk7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbXMobmV3Q2FyZCk7XHJcblxyXG4gIGNhcmRQb3BVcC5jbG9zZU1vZGFsKCk7XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wVXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wVXBTZWxlY3Rvcik7XHJcbiAgfVxyXG4gIG9wZW5Nb2RhbChuYW1lLCBsaW5rKSB7XHJcbiAgICB0aGlzLnBvcFVwSW1hZ2UgPSB0aGlzLl9wb3BVcEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLnBvcFVwVGl0bGUgPSB0aGlzLl9wb3BVcEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2JveC1pbWFnZS10aXRsZVwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5wb3BVcEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLnBvcFVwSW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMucG9wVXBUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuTW9kYWwoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgICAvLyB0aGlzLl91c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgdXNlckluZm9MaXN0ID0ge307XHJcbiAgICB1c2VySW5mb0xpc3QubmFtZSA9IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50O1xyXG4gICAgdXNlckluZm9MaXN0LmRlc2NyaXB0aW9uID0gdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudDtcclxuICAgIHJldHVybiB1c2VySW5mb0xpc3Q7XHJcbiAgfVxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIsIGl0ZW1zIH0sIHNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gIH1cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIC8vIHRoaXMuX3JlbmRlciB0byByZW5kZXIgdGhlIGRhdGEgaW50byB0aGlzLl9lbGVtZW50c1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLmFkZEl0ZW1zKHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBhZGRJdGVtcyhlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJuYW1lIiwibGluayIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlIiwiX2hhbmRsZURlbGV0ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsImdldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsIl9jYXJkIiwic3JjIiwidGV4dENvbnRlbnQiLCJhbHQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9mb3JtIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFTCIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9pbnB1dEVMcyIsImV2ZXJ5IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImUiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcFVwU2VsZWN0b3IiLCJfcG9wVXBFbGVtZW50Iiwib3Blbk1vZGFsIiwiX2Nsb3NlTW9kYWxCeUVzY2FwZSIsImNsb3NlTW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiX2Nsb3NlTW9kYWxPblJlbW90ZUNsaWNrIiwiZXZ0IiwiY3VycmVudFRhcmdldCIsInRhcmdldCIsImNvbnRhaW5zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlTW9kYWxTdWJtaXQiLCJzdXBlciIsIl9wb3BVcEZvcm0iLCJfaGFuZGxlTW9kYWxTdWJtaXQiLCJyZXNldCIsIm1vZGFsSW5wdXRzIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsImluaXRpYWxDYXJkcyIsInByb2ZpbGVFZGl0TW9kYWwiLCJhZGRNb2RhbEZvcm0iLCJwcm9maWxlRWRpdEZvcm0iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJhZGRCdXR0b24iLCJzZWxlY3RvcnMiLCJjYXJkU2VjdGlvbiIsImNhcmRUZW1wbGF0ZSIsInByb2ZpbGVTZWxlY3RvciIsImFkZFNlbGVjdG9yIiwiaW1hZ2VTZWxlY3RvciIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJyZW5kZXJDYXJkIiwiY2FyZERhdGEiLCJjb25zdGFudHMiLCJwb3BVcEltYWdlTW9kYWwiLCJwb3BVcEltYWdlIiwicG9wVXBUaXRsZSIsImFkZEZvcm1WYWxpZGF0b3IiLCJuZXdVc2VySW5mbyIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJ1c2VySW5mb0xpc3QiLCJkZXNjcmlwdGlvbiIsInNldFVzZXJJbmZvIiwicHJvZmlsZVBvcHVwIiwidGl0bGUiLCJjYXJkUG9wVXAiLCJwbGFjZSIsIlVybCIsIm5ld0NhcmQiLCJhZGRJdGVtcyIsInNlbGVjdG9yIiwicmVuZGVyZXIiLCJpdGVtcyIsIl9yZW5kZXJlciIsIl9pdGVtcyIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCJdLCJzb3VyY2VSb290IjoiIn0=